/* SVN.committedRevision=1653438 */
if(require&&require.config){pathurl=window.pathurl||"http://image.yihaodianimg.com/front-homepage";require.config({baseUrl:pathurl+"/js/",paths:{common_cart:pathurl+"/mglobal/js/common/cart",common_lazyload:pathurl+"/mglobal/js/common/lazyload",common_popupTips:pathurl+"/mglobal/js/common/popupTips","common_yhd.storage":pathurl+"/mglobal/js/common/yhd.storage",common_slider:pathurl+"/mglobal/js/libs/slider",libs_c_slide:pathurl+"/mglobal/js/libs/c_slide",common_touch:pathurl+"/mglobal/js/libs/touch",common_mcookie:pathurl+"/mglobal/js/common/cookie",common_globalTiming:pathurl+"/mglobal/js/common/yhd.globalTiming",util_globalLogin:pathurl+"/mglobal/js/util/yhd.globalLogin",global_env:pathurl+"/mglobal/js/global/env","tracker_ref_yhd.global_spm":pathurl+"/mglobal/js/tracker/ref/yhd.global_spm","tracker_ref_yhd.uid":pathurl+"/mglobal/js/tracker/ref/yhd.uid",tracker_adContentTracker:pathurl+"/mglobal/js/tracker/adContentTracker",tracker_areaModuleTracker:pathurl+"/mglobal/js/tracker/areaModuleTracker","tracker_ref_yhd.extTrackerSend":pathurl+"/mglobal/js/tracker/ref/yhd.extTrackerSend",common_search:pathurl+"/mglobal/js/common/search_v2",biz_yhd_productInfo:pathurl+"/mglobal/js/biz/yhd.productInfo",biz_loli_page:pathurl+"/mglobal/js/biz/loli.page",biz_appDownloadBottom:pathurl+"/mglobal/js/biz/appDownloadBottom",biz_newUserMesssage:pathurl+"/mglobal/js/biz/newUserMesssage",common_popupWindow:pathurl+"/mglobal/js/common/popupWindow",common_redirect:pathurl+"/mglobal/js/common/redirect",native_redirect:pathurl+"/mglobal/js/common/redirectNative",common_fastclick:pathurl+"/mglobal/js/libs/fastclick",base_observer:pathurl+"/global/js/base/yhd.observer",global_provinceSwitch:pathurl+"/mglobal/js/global/provinceSwitch",libs_jweixin:pathurl+"/mglobal/js/libs/jweixin-1.0.0",common_yhd_webp:pathurl+"/mglobal/js/common/yhd.webp",common_back:pathurl+"/mglobal/js/common/yhd.globalBack",nearshop_redirectCart:pathurl+"/mglobal/js/nearshop/redirectCart",abtestPv_tracker:pathurl+"/mglobal/js/tracker/abtestPvTracker",biz_newUserPopup:pathurl+"/mglobal/js/biz/yhd.newUserPopup",common_locateAddress:pathurl+"/mglobal/js/common/locationAddress"}})
};$(function(){if($("#searchBox").size()>0){require(["common_search"],function(b){b.init()})}if($("#globalCart").size()>0||$("body>div.global-nav").size()>0){require(["common_cart"],function(b){b.refreshCart()})}if($("#globalMore").size()>0){$("#globalMore").on("click",function(){var b=$("#globalMoreList");if(b.hasClass("hide")){b.removeClass("hide")}else{b.addClass("hide")}});$(document.body).on("click",function(d){var c=d.target?d.target:d.srcElement;if(c){if($(c).closest("div.more_list").size()==0&&$(c).closest("#globalMore").size()==0){$("#globalMoreList").addClass("hide")}}})}if((typeof indexFlag!="undefined"&&indexFlag==1)||$("#cprovincename").length>0){require(["common_popupTips","common_mcookie","global_env"],function(f,h,g){var e=g.getProvinceId()||1;if(e&&e==currProvinceId){$("#cprovincename").html(f.proviceObj["p_"+e])
}else{if(currProvinceId){$("#cprovincename").html(f.proviceObj["p_"+currProvinceId])}else{$("#cprovincename").html(f.proviceObj.p_1)}}})}require(["common_back"],function(b){b.saveURL()})});$(function(){var g=$(".global-nav"),f=$(".global-nav__operate-wrap");f.on("click",function(){if(f.parent().hasClass("global-nav--current")){h()}else{e()}});var e=function(){g.addClass("global-nav--current")};var h=function(){g.removeClass("global-nav--current")};$(window).on("scroll",function(){if(g.hasClass("global-nav--current")){h()}});require(["global_env"],function(a){var b=a.isInApp();if(b){g.hide()}})});(function(){require(["common_popupTips","global_env"],function(f,g){if(typeof(_isNotglGeoLocation)!="undefined"&&_isNotglGeoLocation){return}var j=g.getProvinceId();if(!j&&glGeoLocation){var h=g.isInApp();if(!h){var i=URLPrefix.index||"http://m.yhd.com";f.getGeo(i+"/mw/provice",i+"/mw/index/",pathurl+"/mglobal/css/popupTips.css")}}})})();(function(){function b(){require(["common_globalTiming"],function(d){function a(){var j=1;
var c=[];if(typeof common_globalTimingRely!="undefined"&&common_globalTimingRely){var k=common_globalTimingRely.getRelyResource();if(k&&k.length>0){for(var l=0;l<k.length;l++){var i=k[l];if(i&&i.status!=1){j=0;break}else{if(i&&i.status==1){c.push(i.key+"_"+i.time)}}}}}if(j){d.loadBaseTime(c)}else{setTimeout(a,2000)}}setTimeout(a,2000)})}if(document.addEventListener){window.addEventListener("load",b,false)}else{if(document.attachEvent){document.attachEvent("onload",function(){b()})}}})();(function(){if(window.sessionStorage){var d=window.sessionStorage.getItem("latitude");var c=window.sessionStorage.getItem("longitude");if(d&&c){trackerContainer.addParameter(new Parameter("latitude",d));trackerContainer.addParameter(new Parameter("longitude",c))}}})();$(function(){var b=$("#g_newUserMesssage");
if(b){require(["biz_newUserMesssage"],function(a){})}});$(function(){var d=$("#g_openAppId");var c=document.referrer;if(d.length>0){if(c.indexOf("baidu.com")>-1||c.indexOf("haosou.com")>-1||c.indexOf("m.sm.cn")>-1||c.indexOf("sogou.com")>-1){require(["biz_appDownloadBottom"],function(a){})}else{d.hide()}}});function commonStatistics(h,g,f,e){addTrackPositionToCookie(g,f);if(e!=null&&e!=""){window.location=e+"?time="+(new Date().getTime())}else{gotracker(g,f,null)}}(function(){var f=window.utils||(window.utils={});var d=10;var e=function(h,c){var b="http:\\/\\/d(\\\d{1,2})\\.";var a=new RegExp(b,"i");if(a.test(h)){if(d==11){d=10}else{d=11}return h.replace(a,"http://d"+d+".")}else{return h}};f.avgImgUrl=e})();define("common_globalTiming",function(){var f={};var g={};var e=".";g.checkTpPage=function(a){if(!a){return null}var b=a.split(e);return b.length==2?b:null};g.glSpmcodeToId=function(a,b){if(typeof(_globalSpmDataModelJson)!="undefined"&&_globalSpmDataModelJson){var c=0;if(a){c=_globalSpmDataModelJson[a][b]}else{c=_globalSpmDataModelJson[b]}if(c){return c}}return b};function h(){var a=$("meta[name=tp_page]").attr("content");if(typeof(a)=="undefined"){return}a=g.checkTpPage(a);if(!a){return}return g.glSpmcodeToId(null,a[0])}f.timeToStr=function(c,a){var b=[];for(var d in c){if(c[d].value==-1){continue}b.push(c[d].name+"_"+c[d].value)}if(a){if((typeof a=="object")&&a.constructor==Array){if(a.length>0){b=b.concat(a)}}else{b.push(a)}}return(b.join("-"))};f.basicTime=function(d){if(!window.performance){return
}var b=window.performance,i=b.timing,c=b.navigation,l={redirectCount:{name:"RDTT",value:c.redirectCount},redirectTime:{name:"RDTM",value:i.redirectEnd-i.redirectStart},domainLookupTime:{name:"DMLKT",value:i.domainLookupEnd-i.domainLookupStart},connectTime:{name:"CONTT",value:i.connectEnd-i.connectStart},requestTime:{name:"REQT",value:i.responseStart-(i.requestStart||i.responseStart+1)},responseTime:{name:"RSPT",func:function(){var j=i.responseEnd-i.responseStart;if(i.domContentLoadedEventStart){if(j<0){j=0}}else{j=-1}return j},value:-1},domParsingTime:{name:"DMPT",func:function(){return i.domContentLoadedEventStart?i.domInteractive-i.domLoading:-1},value:-1},domLoadedTime:{name:"DMLT",func:function(){if(i.loadEventStart){return i.loadEventStart-i.domInteractive}return i.domComplete?i.domComplete-i.domInteractive:-1
},value:-1},winOnLoadTime:{name:"ONLOADT",func:function(){return i.loadEventEnd?i.loadEventEnd-i.loadEventStart:-1},value:-1},pageLoadTime:{name:"PAGET",func:function(){if(i.loadEventStart){return i.loadEventStart-i.fetchStart}return i.domComplete?i.domComplete-i.fetchStart:-1},value:-1},allLoadTime:{name:"ALLT",func:function(){if(i.loadEventEnd){return i.loadEventEnd-i.navigationStart}return i.domComplete?i.domComplete-i.navigationStart:-1},value:-1},firstPaintTime:{name:"FPAINTT",func:function(){var j=i.firstPaint||i.msFirstPaint||i.mozFirstPaint||i.webkitFirstPaint||i.oFirstPaint;return j?j-i.navigationStart:-1},value:-1},beforeDomLoadingTime:{name:"BEFDMLT",func:function(){return i.domLoading?i.domLoading-i.navigationStart:-1},value:-1},resourcesLoadedTime:{name:"RESLOADT",func:function(){if(i.loadEventStart){return i.loadEventStart-i.domLoading
}return i.domComplete?i.domComplete-i.domLoading:-1},value:-1},scriptRunTime:{name:"SCRIPTT",func:function(){var j=i.domContentLoadedEventEnd-i.domContentLoadedEventStart;return j>0?j:-1},value:-1},customInteractTime:{name:"CINTT",func:function(){var j=window.global||(window.global={});var n=j.vars=(j.vars||{});var k=j.vars.customInteractTime;if(k){return k-window.performance.timing.navigationStart}else{return -1}},value:-1},interactTime:{name:"INTT",func:function(){if(i.domContentLoadedEventStart){return i.domContentLoadedEventStart-i.navigationStart}return -1},value:-1}};for(var a in l){if(l[a].value==-1&&typeof l[a].func=="function"){l[a].value=l[a].func()}}return this.timeToStr(l,d)};f.eventHandleTime=function(l){try{var a=[];if(typeof l=="undefined"){return false}else{if(l instanceof Array){var b=false;
for(var c=0;c<l.length;c++){var d=l[c];if(typeof d=="object"){if(typeof d.name=="undefined"||d.endTime=="undefined"||d.startTime=="undefined"){console.log("data format is wrong! propeties should have name or endTime or startTime ");continue}else{if(typeof d.endTime!="number"||typeof d.startTime!="number"){console.log(" endTime or startTime of "+d.name+"Object is not number type");continue}else{a.push(d.name+"_"+(d.endTime-d.startTime));b=true}}}else{console.log("data format of Array is wrong! should be single Object");continue}}if(b){f.sendTimerTracker(a.join("|"));return true}}else{if(typeof l=="object"){if(typeof l.name=="undefined"||l.startTime=="undefined"||l.endTime=="undefined"){console.log("data format is wrong! propeties should be name and startTime ");return false}else{if(typeof l.startTime!="number"||typeof l.endTime!="number"){console.log(" startTime of "+l.name+"Object is not number type");
return false}f.sendTimerTracker(l.name+"_"+(l.endTime-l.startTime));return true}}else{return false}}}}catch(i){}};f.sendTimerTracker=function(b){if(b&&$.trim(b)!=""){var a=h();if(!a||isNaN(a)||parseInt(a)<=0){recordTrackInfoWithType("2",b);return}var c={w_pt:a};recordTrackInfoWithType("2",b,null,null,c)}};f.loadBaseTime=function(a){if(!window.performance){return}if(typeof stopGlobalTimingLoadFlag=="undefined"){f.sendTimerTracker(f.basicTime(a))}};return f});define("common_yhd.storage",function(){var p=window.loli||(window.loli={});var v="localStorage",t="sessionStorage",n={},w={};n.set=function(a,b){};n.get=function(a){};n.remove=function(a){};n.clear=function(){};w.set=function(a,b){};w.get=function(a){};w.remove=function(a){};w.clear=function(){};function m(a){try{return(a in window&&window[a])}catch(b){return false}}function u(b,a){var c=window[b];a.set=function(e,d){if(d===undefined){return c.remove(e)}c.setItem(e,d);return d};a.get=function(d){return c.getItem(d)};a.remove=function(d){c.removeItem(d)};a.clear=function(){c.clear()}}if(m(v)){u(v,n)}if(m(t)){u(t,w)}var q=function(){var c=true;var d=document.domain;var b=/([^\.]*)\.yhd\.com/;if(b.test(d)){var a=b.exec(d)[1];if(a!="www"){c=false}}return c};var r=function(){var a=window.navigator.userAgent.toLowerCase();
var d=/safari/i;var b=/chrome/i;var c=/Android/i;if(d.test(a)&&!b.test(a)&&!c.test(a)){return true}return false};var x=function(){var a=new Date();return(a.getYear()+1900)+""+(a.getMonth()+1)};var s=function(h,j,f,l){var g=f||function(){};var a=(l&&l=="session")?w:n;if(q()){var i=a.set(h,j);g({status:1,key:h,value:i})}else{if(r()&&l!="session"){$.fn.cookie(h,encodeURIComponent(j),{domain:"m.yhd.com",path:"/",expires:30});g({status:1,key:h,value:j});return}if(!window.postMessage||!window.addEventListener){g({status:0,key:h,value:null});return}var z="globalLocalStorageAdaptorForSet";var e=$("#"+z);if(e.size()==0){var c=document.createElement("iframe");c.setAttribute("id",z);c.setAttribute("style","display:none");c.setAttribute("src",window.location.protocol+"//www.yhd.com/html/setLocalStorageH5.html?v="+x());
document.body.appendChild(c);e=$("#"+z)}if(e.attr("loaded")){var b=e.get(0).contentWindow;var k=window.location.protocol+"//www.yhd.com";var d={key:h,value:j,type:l};b.postMessage(d,k);setTimeout(function(){g({status:1,key:h,value:j})},200)}else{e.on("load",function(){$(this).attr("loaded","1");var y=$(this).get(0).contentWindow;var D=window.location.protocol+"//www.yhd.com";var C={key:h,value:j,type:l};y.postMessage(C,D);setTimeout(function(){g({status:1,key:h,value:j})},200)})}}};var o=function(i,d,l){var h=d||function(){};var a=(l&&l=="session")?w:n;if(q()){var f=a.get(i);h({status:1,key:i,value:f})}else{if(r()&&l!="session"){var f=$.fn.cookie(i);if(f!==null){f=decodeURIComponent(f)}h({status:1,key:i,value:f});return}if(!window.postMessage||!window.addEventListener){h({status:0,key:i,value:null});
return}var E=window["yhd.storage.get.callback"]||(window["yhd.storage.get.callback"]=[]);E.push(h);var k=E.length-1;var D="globalLocalStorageAdaptorForGet";var g=$("#"+D);if(g.size()==0){var C=document.createElement("iframe");C.setAttribute("id",D);C.setAttribute("style","display:none");C.setAttribute("src",window.location.protocol+"//www.yhd.com/html/getLocalStorageH5.html?v="+x());document.body.appendChild(C);g=$("#"+D)}if(g.attr("loaded")){var b=g.get(0).contentWindow;var j=window.location.protocol+"//www.yhd.com";var e=window.location.protocol+"//"+window.location.host;var c={key:i,host:e,version:k,type:l};b.postMessage(c,j)}else{g.on("load",function(){$(this).attr("loaded","1");var y=$(this).get(0).contentWindow;var A=window.location.protocol+"//www.yhd.com";var z=window.location.protocol+"//"+window.location.host;
var B={key:i,host:z,version:k,type:l};y.postMessage(B,A)})}var F=function(B){var y=/^http[s]?:\/\/([\.\w]*)\.yhd\.com/i;if(y.test(B.origin)){var z=B.data;if(z){var A=E[z.version];if(A){A({status:1,key:z.key,value:z.value})}else{h({status:1,key:z.key,value:z.value})}}}};if(!window["yhd.storage.get.handler"]){window.addEventListener("message",F);window["yhd.storage.get.handler"]=F}}};n.setFromRoot=function(b,c,a){s(b,c,a,"local")};n.getFromRoot=function(a,b){o(a,b,"local")};w.setFromRoot=function(b,c,a){s(b,c,a,"session")};w.getFromRoot=function(a,b){o(a,b,"session")};p.yhdStore=n;p.yhdSessionStore=w;return n});define("common_search",["tracker_ref_yhd.global_spm","common_yhd.storage"],function(x,C){var v={};var A=(typeof isSearchKeyWords!="undefined"&&isSearchKeyWords=="1")?1:0;var t=(typeof indexFlag!="undefined"&&indexFlag==1)?1:0;var r=(typeof globalSearchSelectFlag!="undefined"&&globalSearchSelectFlag=="0")?0:1;var p=$("#keyword");var w=$("#searchSuggest");var q=$("#searchBtn");var D=$("#searchBox");var s=window.loli||(window.loli={});var y=s.app=s.app||{};var z=s.app.search=s.app.search||{};var B=URLPrefix.search||"http://search.m.yhd.com";z.delayCall=function(f,b,c,g){var a=$(f);a.lastTime=new Date().getTime();if(b){var e=b.call(a);a.lastResult=e}var d=setTimeout(function(){var i=a.lastTime?a.lastTime:new Date().getTime();var j=(typeof a.lastResult=="undefined"||a.lastResult)?true:false;var h=new Date().getTime();
if(h-i>=(g-50)){if(c&&j){c.call(a)}}},g)};z.filterXml=function(a){if(a!=null&&a!=""){a=a.replace(/\&/g,"");a=a.replace(/\</g,"");a=a.replace(/\>/g,"");a=a.replace(/\\/g,"");a=a.replace(/\'/g,"");a=a.replace(/\"/g,"")}return a};z.saveKeyword=function(a,b){var c=C;if(c){c.getFromRoot("search_keyword_history",function(j){if(j&&j.status==1){var g=j.value;var i=[];var e=[];if(g){i=g.split(",")}for(var f=0;f<i.length;f++){var h=z.filterXml(decodeURIComponent(decodeURIComponent(i[f])));if(h!=null&&h.length>0){e.push(h)}}var d=false;for(var f=0;f<e.length;f++){if(e[f]==a){d=true;break}}if(!d){e.push(a);if(e.length>10){e.shift()}for(var f=0;f<e.length;f++){e[f]=encodeURIComponent(encodeURIComponent(e[f]))}c.setFromRoot("search_keyword_history",e.join(","),function(k){if(k&&k.status==1){if(b){b()}}})
}else{if(b){b()}}}})}if(b){setTimeout(function(){b()},3*1000)}};z.getSearchKeywordUrl=function(c,b,a){if(a){c=c+" "+a}if(!b){b="0";return B+"/search/k"+encodeURIComponent(c)}return B+"/search/c"+b+"-0/k"+encodeURIComponent(c)};z.goSearch=function(a,c,b){var d=function(){var e=z.getSearchKeywordUrl(a,c,b);x.refreshPage(e,D)};z.saveKeyword(a,d)};z.showHistory=function(b,f){if(!r){return}var a=b.val();var e=C;var c=function(){var g=B+"/search/getSmartKeyword/?callback=?";$.getJSON(g,function(h){if(h&&h.hotSearchKeywords&&h.hotSearchKeywords.length>0){var j=[];for(var k=0;k<h.hotSearchKeywords.length;k++){var i=z.filterXml(h.hotSearchKeywords[k]);j.push("<a class='item' href='javascript:goSearch(\""+i+"\")'>"+i+"</a>")}$("div.tags",f).html(j.join(""));$("div.tags",f).show()}if(e){e.getFromRoot("search_keyword_history",function(l){if(l&&l.status==1){var H=l.value;
var n=[];var o=[];if(H){n=H.split(",")}for(var G=n.length-1;G>=0;G--){var m=z.filterXml(decodeURIComponent(decodeURIComponent(n[G])));if(m!=null&&m.length>0){o.push("<li><a class='link_text' href='javascript:goSearch(\""+m+"\")'>");o.push("<span class='icon icon-history'></span>");o.push("<span class='text'>"+m+"</span>");o.push("<span class='icon_arrow icon-right_arrow'></span>");o.push("</a></li>")}}$("ul",f).html(o.join(""));if(n.length==0){f.find("a.clear_history").hide()}else{f.find("a.clear_history").show()}}})}$("#globalHeader").addClass("search_show");d(b,f)})};var d=function(h,g){g.on("click","a.clear_history",function(){e.setFromRoot("search_keyword_history","");$(this).hide();$("ul",g).html("")})};if(a==""||$.trim(a)==""){c()}};z.showSuggest=function(a,c){if(!r){return}var d=z.filterXml(a.val());
var b=function(){var e=B+"/search/getSmartKeyword/?keyword="+encodeURIComponent(d)+"&callback=?";$.getJSON(e,function(h){if(h){var j=[];var g=d;if(h.keywords&&h.keywords.length>0){var i=h.keywords[0];g=h.keywords[0].keyword;j.push("<li>");j.push("<a class='link_text' href='javascript:goSearch(\""+i.keyword+"\")'>");j.push("<span class='icon icon-search'></span>");j.push("<span class='text'>"+i.keyword+"</span>");j.push("</a>");for(var f=0;f<i.attrs.length;f++){j.push("<a class='link_tag' href='javascript:goSearch(\""+i.keyword+'",0,"'+i.attrs[f]+"\")'>"+i.attrs[f]+"</a>")}j.push("</li>")}if(h.recommendCID1&&h.recommendCNA1){j.push("<li><a class='link_text' href='javascript:goSearch(\""+g+'","'+h.recommendCID1+"\")'>");j.push("<span class='icon icon-sort'></span>");j.push("<span class='text_category'>在<strong>"+h.recommendCNA1+"</strong>分类中搜索</span>");
j.push("<span class='icon_arrow icon-right_arrow'></span>");j.push("</li></a>")}if(h.recommendCID2&&h.recommendCNA2){j.push("<li><a class='link_text' href='javascript:goSearch(\""+g+'","'+h.recommendCID2+"\")'>");j.push("<span class='icon icon-sort'></span>");j.push("<span class='text_category'>在<strong>"+h.recommendCNA2+"</strong>分类中搜索</span>");j.push("<span class='icon_arrow icon-right_arrow'></span>");j.push("</li></a>")}if(h.keywords&&h.keywords.length>0){for(var k=1;k<h.keywords.length;k++){var i=h.keywords[k];j.push("<li>");j.push("<a class='link_text' href='javascript:goSearch(\""+i.keyword+"\")'>");j.push("<span class='icon icon-search'></span>");j.push("<span class='text'>"+i.keyword+"</span>");j.push("</a>");for(var f=0;f<i.attrs.length;f++){j.push("<a class='link_tag' href='javascript:goSearch(\""+i.keyword+'",0,"'+i.attrs[f]+"\")'>"+i.attrs[f]+"</a>")
}j.push("</li>")}}$("ul",c).html(j.join(""));$("div.tags",c).hide();c.find("a.clear_history").hide();$("#globalHeader").addClass("search_show")}})};if(d!=""&&$.trim(d)!=""){b()}};z.registerGlobalEvent=function(){var a=function(e,g,c){e=e||window.event;if(e){var d=e.keyCode;if(d=="116"||d=="16"||d=="17"||d=="18"||d=="38"||d=="40"||d=="13"){return}}var f=z.filterXml(g.val());if(f==""||$.trim(f)==""){z.delayCall(g,function(){D.find("span.icon_delete").hide()},function(){z.showHistory(g,c)},200)}else{z.delayCall(g,function(){D.find("span.icon_delete").show()},function(){z.showSuggest(g,c)},200)}};var b=function(d,f,c){var e=z.filterXml(f.val());if(e==""||$.trim(e)==""){z.delayCall(f,null,function(){z.showHistory(f,c)},200)}else{z.delayCall(f,null,function(){z.showSuggest(f,c)},200)}};p.on("focus",function(c){b(c,p,w)
});p.on("input",function(c){a(c,p,w)});q.on("click",function(c){var d=z.filterXml(p.val());if(d!=""&&$.trim(d)!=""){z.goSearch(d)}});$("#searchForm").on("submit",function(){var c=z.filterXml(p.val());if(c!=""&&$.trim(c)!=""){z.goSearch(c)}return false});u()};function u(){D.on("click","span.icon_back",function(){p.val(p.attr("data-original"));D.find("span.icon_delete").hide();$("#globalHeader").removeClass("search_show")});D.on("click","span.icon_delete",function(a){p.val("");D.find("span.icon_delete").hide();p.trigger("focus")});$("#searchMask").on("click",function(){p.val(p.attr("data-original"));D.find("span.icon_delete").hide();$("#globalHeader").removeClass("search_show")})}v.init=function(){if("shop"==globalTopType||"groupShop"==globalTopType){u();p.on("click",function(){$("#globalHeader").addClass("search_show");
w.hide()});return}z.registerGlobalEvent();window.goSearch=function(c,b,a){z.goSearch(c,b,a)}};v.show=function(){var a=z.filterXml(p.val());if(a==""||$.trim(a)==""){z.showHistory(p,w)}else{z.showSuggest(p,w)}};return v});define("biz_newUserMesssage",["common_mcookie","util_globalLogin"],function(i,l){var m=$("#g_newUserMesssage");function j(b){var c=new Date(),a=c.getTime()%(1000*60*60*24),d=b.getTime()-c.getTime(),e=d+a;if(e<0||e>1000*60*60*24){return false}else{return true}}var n=function(a){if(a.result==1){m.hide()}else{m.show()}};function h(){var b=localStorage.getItem("newUserMesssage");if(b){var a=new Date(b);if(j(a)){m.hide()}else{m.show()}}else{m.show()}}var k=i.getCookie("yihaodian_uid");if(k){m.hide()}else{h();l.globalCheckLogin(n)}m.on("click",".icon-delete",function(){m.hide();localStorage.setItem("newUserMesssage",(new Date()).toISOString())})});define("common_back",["tracker_ref_yhd.global_spm","common_yhd.storage"],function(u,H){var x={};var L=window.loli||(window.loli={});var D=L.app=L.app||{};var v=L.app.url=L.app.url||{};var y=L.yhdSessionStore;var t=L.app.url.cfg=L.app.url.cfg||{enable:true,type:"url",maxSize:100};var z=function(){var a="user_browse_history";if(window.name==""){window.name=new Date().getTime()}return a+"_"+window.name};var I=z();var K=function(a){y.getFromRoot(I,function(c){var b=null;if(c&&c.status==1){var d=c.value;b=(d!=null&&d!="")?$.parseJSON(d):null}a(b)})};var F=function(a,b){var c=a?JSON.stringify(a):"";y.setFromRoot(I,c,function(d){if(b){b(d)}})};var B=function(c){var f="";var a="";var h="";var e="";var b=/^(http[s]?:\/\/[\.\w]*\.yhd\.com)[\/]?/i;var g=/^http[s]?:\/\/[\.\w]*\.yhd\.com(\/[^\?]*\/?)[\?\#]*/i;
var d=/(\?[^\#]*)/i;var i=/(\#.*)/i;if(b.test(c)){f=b.exec(c)[1]}if(g.test(c)){a=g.exec(c)[1]}if(d.test(c)){h=d.exec(c)[1]}if(i.test(c)){e=i.exec(c)[1]}return{domain:f,path:a,params:h,hash:e}};var C=function(b,a){var c=new RegExp("[?&]"+a+"=[^&#]*");var d=b;if(c.test(b)){var e=c.exec(b)[0];if(e.charAt(0)=="?"){d=b.replace(c,"?")}else{d=b.replace(c,"")}if(d.indexOf("?&")!=-1){d=d.substring(0,d.indexOf("?&")+1)+d.substring(d.indexOf("?&")+2)}if(d.charAt(d.length-1)=="?"){d=d.substring(0,d.length-1)}}return d};var J=function(c){var a=/(\#.*)/i;var b=c;if(a.test(c)){b=c.replace(a,"")}return b};var E=function(a){var b=C(a,"tp");b=C(b,"tc");b=C(b,"tce");return b};var A=function(a,i){var f=window.user_browse_history;var l=E(document.location.href);var g=-1;if(f&&f.data&&f.data.length>0){if(a=="url"){if(i){for(var d=f.index-1;
d>=0;d--){var k=J(E(f.data[d]));if(k&&i==k){g=d-f.index;break}}}else{var b=J(E(l));var c=false;for(var d=f.index-1;d>=0;d--){var k=J(E(f.data[d]));if(k&&b!=k){g=d-f.index;c=true;break}}if(!c){if(window.history.length>f.data.length){g=0-(f.index+1)}}}}else{if(a=="path"){if(i){for(var d=f.index-1;d>=0;d--){var k=E(f.data[d]);if(k){var e=B(k);if(e.path==i){g=d-f.index;break}}}}else{var j=B(l).path;var c=false;for(var d=f.index-1;d>=0;d--){var k=E(f.data[d]);if(k){var e=B(k);if(e.path!=j){g=d-f.index;c=true;break}}}if(!c){if(window.history.length>f.data.length){g=0-(f.index+1)}}}}else{if(a=="domain"){if(i){for(var d=f.index-1;d>=0;d--){var k=E(f.data[d]);if(k){var e=B(k);if(e.domain==i){g=d-f.index;break}}}}else{var h=B(l).domain;var c=false;for(var d=f.index-1;d>=0;d--){var k=E(f.data[d]);if(k){var e=B(k);
if(e.domain!=h){g=d-f.index;c=true;break}}}if(!c){if(window.history.length>f.data.length){g=0-(f.index+1)}}}}else{if(i){for(var d=f.index-1;d>=0;d--){var k=E(f.data[d]);if(k&&i==k){g=d-f.index;break}}}else{g=-1}}}}}return g};var w=function(a,f){var c=window.user_browse_history!=null?window.user_browse_history:{data:[],index:-1,timestamp:0};var e=document.location.href;if(!a){return}if(a==1){if(c.data&&c.data.length>0){var d=c.data[c.index];if(d==e){return}}if(c.data&&c.data.length>0&&c.index>-1){if(c.data.length-1>=c.index+1){c.data.splice(c.index+1)}}c.data.push(e);c.index=c.index+1}else{if(a==2){c={data:[],index:-1};c.data.push(e);c.index=c.index+1}else{if(a==3){if(c.index!=-1){c.index=c.index-1}}else{if(a==4){if(c.index!=-1){c.index=c.index+1}}else{if(a==5){if(f!=-1){c.index=f}}}}}}var b=c.data.length-t.maxSize;
if(b>0&&c.index>=b){c.data.splice(0,b);c.index=c.index-b}c.timestamp=new Date().getTime();c.historyLength=window.history.length;F(c,function(){window.user_browse_history=c})};var G=function(f){var e=document.location.href;var b=0;var a=-1;if(f&&f.data&&f.data.length>0&&f.index>-1){var d=f.data[f.index-1];var c=f.data[f.index+1];if(e==d){b=3}else{if(e==c){b=4}else{b=5;for(var g=f.index-1;g>=0;g--){var h=f.data[g];if(h==e){a=g;break}}if(a==-1){for(var g=f.index;g<f.data.length;g++){var h=f.data[g];if(h==e){a=g;break}}}if(a==-1){b=2}}}}else{b=2}return{flag:b,curIndex:a}};v.saveURL=function(){var a=document.referrer;var b=document.location.href;if(window.user_browse_history){return}K(function(g){window.user_browse_history=g;var h=0;var f=-1;if(!g||!g.data||g.data.length==0){h=2;w(h);return}var d=window.performance.navigation.type;
if(d==0){if(g&&g.data&&g.data.length>0){var e=g.data[g.index];if(a==""){if(window.history.length-1>g.historyLength){h=2}else{h=1}}else{if(a==e||a==J(e)){h=1}else{h=2}}}else{h=2}}else{if(d==1){h=0;if(g&&g.data&&g.data.length>0){var e=g.data[g.index];if(e!=b){h=2}}else{h=2}}else{if(d==2){var c=G(g);h=c.flag;f=c.curIndex}else{h=1}}}if(h){w(h,f)}})};v.saveAnchor=function(){var b=window.history.length;var a=window.history.state;window.onpopstate=function(g){var d=g||window.event;var f=document.location.href;var i=0;var c=-1;var e=function(k){if(!k||!k.data||k.data.length==0){i=2;w(i);return}if(k.data&&k.data.length>0){var m=k.data[k.index];if(m==f){return}}if(k&&k.data&&k.data.length>0&&k.index>-1){var m=k.data[k.index];if(J(f)!=J(m)){var j=G(k);i=j.flag;c=j.curIndex;w(i,c);return}}if(b==window.history.length){var l=window.history.state;
if(l==null&&a!=null){i=3}else{if(l!=null&&a!=null){if(l.timestamp<=a.timestamp){i=3}else{i=4}}else{if(l!=null&&a==null){i=4}else{i=0}}}}else{var n=new Date().getTime();window.history.replaceState({timestamp:n},"",document.location.hash);i=1}b=window.history.length;a=window.history.state;if(i){w(i,c)}};var h=window.user_browse_history;if(h){e(h)}else{K(e)}}};v.goBack=function(d,a){var b=d?d:t.type;var c=A(b,a);window.history.go(c)};v.isHTML5=function(){if(window.performance&&window.history.replaceState&&window.sessionStorage&&window.postMessage){return true}return false};x.saveURL=function(){if(L.app.url.isHTML5()){L.app.url.saveURL();L.app.url.saveAnchor()}};x.init=function(a){if(a){t=$.extend(t,a)}if(!t.enable){return}if(L.app.url.isHTML5()){$("#topIconBack").attr("href","javascript:void(0);");
$("#topIconBack").off().on("click",function(){L.app.url.goBack()})}};return x});